# Coding Style

## 1. 읽기 쉬운 코드를 작성하는 것이 왜 중요한가

코드의 특성은 **한 번 작성되면 여러 번 읽힌다** 는 것이다.

코드의 가독성이 좋고 이해하기 쉬우면 이리저리 흩어진 퍼즐을 짜 맞추는 작업을 덜 해도 되므로 개발자가 편하다.

프로젝트 규모에 상관없이 유지보수가 쉬워지며, 프로젝트를 개선하기 위한 작업 또한 훨씬 수월하다.

다음과 같은 규칙이 있다.

- 축약적이거나 함축적인 변수명은 피한다.

- 함수 인자의 이름들은 꼭 써준다.

- 클래스와 메서드를 문서화 한다.

- 코드의 주석은 꼭 달도록 한다.

- 재사용 가능한 함수 또는 메서드 안에서 반복되는 코드들은 리팩터링을 해둔다.

- 함수와 메서드는 가능한 한 작은 크기를 유지한다.

그리고 책에서 인상깊게 읽었던 구절이 있다.

**"함축적이고 난해한 함수명을 피하기 바란다"** 라는 부분이었다.

[PEP 20](https://www.python.org/dev/peps/pep-0020/) 에 있는 `Explicit is better than Implicit` 을 보는 것 같았다.


## 2. PEP 8

[PEP 8](https://www.python.org/dev/peps/pep-0008/)은 파이썬 공식 스타일 가이드 이다.

다음과 같은 관례들이 있다. 

- 들여쓰기에는 스페이스 4 칸을 이용한다

- 최상위 함수와 클래스 선언 사이를 구분짓기 위해 두 줄을 띄운다.

- 클래스 안에서 메서드들을 나누기 위해 한 줄을 띄운다.

이러한 규칙들이 있기에 Python이 다른 언어에 비해 깔끔한 코드, 가독성 높은 코드를 작성하기 쉬운 편인 듯 하다.

장고에서 Python 파일들은 모두 이 PEP 8 규칙을 준수하도록 하자.

`flake8` 이라는 도구가 있는데 사용해보면 좋을 것 같다.

### 2.1 79 칼럼의 제약

PEP 8 에 따르면 한 줄당 텍스트 길이는 79글자를 넘어서는 안 된다.

하지만 나는 이 부분에 동의하지 못 한다.

왜냐하면 이 부분은 예전에 모니터가 작은 컴퓨터로 개발했을 때 생긴 것이라고 알고 있다.

그 떄는 79 칼럼이 딱 모니터의 가로 사이즈 였고, 더 넘기게 되면 스크롤을 해야하니 불편하다고 생각되었겠다.

그래서 한 화면에서 스크롤 없이 볼 수 있는 79 칼럼으로 제약을 걸어둔 듯 하다.

하지만 요즘은 거의 대부분 120 칼럼으로 사용하고 있는 것 같다.

Pycharm도 아마 기본 설정이 120 글자였던 걸로 기억한다.

그래서 나는 이 부분에 대해서 120 글자로 사용하고 있다.


## 3. import 에 대해

PEP 8 에서 다음과 같은 import 순서를 지향하고 있다.

1. 표준 라이브러리

2. 연관 외부 라이브러리

3. 로컬 애플리케이션 또는 라이브러리에 한정된 것

관련해서 Pycharm 에서는 `Optimize import` 라는 것을 지원한다. 사용해보시길.

장고의 import 순서는 다음과 같다.

1. 표준 라이브러리

2. 코어 장고 

3. 장고와 무관한 외부 앱

4. 프로젝트 앱


## 4. 명시적 성격의 상대 임포트 이용하기

~~이 부분은 좀 말이 어렵다~~

명시적 상대 임포트(explicit relative import) 는 이런 것이다

```python
# Bad Example
from cone.models import WaffleCone
from cone.forms import WaffleConeForm
```

대신 이렇게 사용한다

```python
# Good Example
from .models import WaffleCone
from .forms import WaffleConeForm
```

이런 식으로 상대 경로로 접근해서 명시적으로 임포트 하는 것을 말하는 것 같다.

그리고 Python 2 버전대에서는

```python
from __future__ import absolute_import
```

라는 것을 사용해서 Python 3를 사용하지 않아도 이런 혜택을 누릴 수 있다고 한다.

그리고 이러한 임포트들을 표로 잘 분리해주었다.


|                코드               |   임포트 타입    |                 용도                 |
| :------------------------------- | :-----------: | :---------------------------------- |
| from core.views import FoodMixin |   절대 임포트    | 외부에서 임포트해서 현재 앱에서 이용할 때     |
| from .models import WaffleCone   |   명시적 상대    | 다른 모듈에서 임포트해서 현재 앱에서 이용할 때 |
| from models import WaffleCone    |   암묵적 상대    | 종종 다른 모듈에서 임포트해서 현재 앱에서 이용할 때 쓰지만 좋은 방법은 아님 |


## 5. import * 은 피하자

```python
# Baaaaaaad Pattern! Don't do this.
from django.forms import *
from django.db.models import *
```

정말 나쁜 패턴 중에 하나이다.

이럴 경우에 내가 정의했던 것들이 오버라이딩 되거나 의도치 않은 것들이 추가로 로딩되면서 예상치 못한 결과를 내뱉을 수 있다.

**절대로 위와 같이 작성하지 말자**

## 6. 장고 코딩 스타일

일반적으로 널리 통용되는 장고 코딩 스타일!

## 6.1 장고 코딩 스타일

PEP 8 을 확장한 장고만의 코딩 스타일을 가지고 있다.

## 6.2 URL 패턴 이름에는 대시(-) 대신 밑줄(_) 을 이용한다

밑줄을 대시 대신 이용한다.

다음과 같이 말이다.

```python
urlpatterns = [
    url(r'^add/$', views.add_topping, name='add_topping'),
]
```

요롷게 말이다. 저기에 밑줄 대신 대시 가 들어가는 건 바람직하지 않다.

하지만 주소에서 `add/` 대신 `add-topping/` 을 사용하는 데에는 전혀 지장이 없다.